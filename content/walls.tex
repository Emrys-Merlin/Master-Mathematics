
\section{Walled spaces, Pocsets and their connection to CAT(0) cube complexes}
\label{sec:walls}

There are a few equivalent notions flying around when it comes to CAT(0) cube complexes. The two main ones I am interested for now are walled spaces and pocsets. As shall follow below, it can be shown that under mild restrictions these objects stand in a one to one correspondence (up to isomorphism) with CAT(0) cube complexes. In fact, we are talking about category equivalences between the categories of walled spaces, pocsets and CAT(0) cube complexes. The exact definition of these categories will follow suite.

One interesting implication of this equivalence is, that it is rather easy to find walled spaces and a group action on it and by the construction of the above functors there will be an action of the same group on a CAT(0) cube complex. Thus this construction gives rise to quite a few example of interesting groups, which can be understood via the complexes.

My exposition will loosely follow the treatise of~\textcite{Nica2004}, \textcite{MR1347406} and \textcite{Roller1999}.

\subsection{The categories}
\label{sec:cat}

\begin{defin}[Pocset, {\cite{Roller1999}}]
  \begin{enumerate}
  \item A \emph{pocset} is a triple \((P, \subset, \ast)\) consisting of a set \(P\) a partial ordering \(\subset\) on \(P\) and a fixed point free, order reversing involution \(\ast\) on \(P\). If no confusion can arise, I will often drop the triple and will only write \(A\) when talking about the pocset. \(f \colon P \to P'\), where \(P\) and \(P'\) are pocsets, is called a \emph{pocset morphism}, if for all \(A, B \in P\) \(A \subset B\) implies that \(f(A) \subset f(B)\) and \(f(A^\ast) = f(A)^\ast\) holds. The pocsets together with these morphisms is what I call the category of pocsets {\textbf{Poc}}.
  \item A pocset \(P\) is called \emph{discrete}, if for any two \(A, B \in P\) the interval
    \[
      [A,B] = \{C \in P \mid A \subset C \subset B\}
    \]
    is finite.
  \item Two elements \(A,B\) of a pocset \(P\) are called \emph{nested}, if they satsify \(A \subset B\), \(A^\ast \subset B\), \(A \subset B^\ast\) or \(A^\ast \subset B^\ast\). Otherwise they are called \emph{transverse}.
  \item A pocset \(P\) is called \emph{finite width}, if there exists a constant \(N \in \N\) such that the cardinality of any subset of transverse elements of \(P\) is bounded from above by \(N\).
  \end{enumerate}
  We will mostly be interested in the subcategory of \emph{discrete pocsets} \textbf{dPoc}.
\end{defin}

\begin{defin}[Walled space, {\cite{Nica2004}}]
  Let \(X\) be a set.
  \begin{enumerate}
  \item A \emph{wall} is a partition of \(X\) in two subsets called \emph{halfspaces}. I will denote these two halfspaces by \(\mathfrak{h}\) and \(\mathfrak{h}^\ast\) and the wall by \(\mathfrak{\hat h} \coloneqq \{\mathfrak{h}, \mathfrak{h}^\ast\}\).
  \item The pair \(X, \mathcal{\hat H}\) is called a \emph{walled space}, if \(\mathcal{\hat H}\) is a set of walls containing the wall \(\{\varnothing, X\}\) and if any two distinct points \(x,y \in X\) are separated by a finite, non-zero number of walls, i.\,e.
    \[
      W(x,y) := \left\{\mathfrak{\hat h} \in \mathcal{\hat H} \relmid (x \in \mathfrak{h} \wedge y \in \mathfrak{h}^\ast) \vee (y \in \mathfrak{h} \wedge x \in \mathfrak{h}^\ast)\right\}
    \]
    is finite and non-empty. By \(\mathcal{H}(X)\) I will denote the set of all halfspaces of \(X\) and by \(\mathcal{\hat H}(X)\) the set of all walls of \(X\). If no confusion can arise I will often denote the set \(X\) as the walled space. Walled spaces together with these morphisms make up the category of walled spaces \textbf{WallS}.
  \item A map \(f: X \to X'\), between two walled spaces \(X\) and \(X'\), is called a \emph{morphism of walled spaces}, if for all \(\mathfrak{h} \in \mathcal{H}(X')\) there holds \(f^{-1}(\mathfrak{h}) \in \mathcal{H}(X)\).
  \item The map
    \[
      d_W\colon X \times X \to \R,\ d_W(x,y) \coloneqq \# W(x,y)
    \]
    is a metric on \(X\).
  \end{enumerate}
\end{defin}

\begin{rem}
  The above definition is non-standard in the sense that often two points are allowed to not be separated by a wall. However, we can always go over to the quotient identifying all points which are not separated leading to a walled space in the above sense. The advantage of the above definition is that we are immediately equipped with a metric on the space \(X\).
\end{rem}

\begin{prop}
  \begin{align*}
    \mathcal{H} \colon {\normalfont \textbf{WallS}} & \to {\normalfont \textbf{dPoc}}\\
    X & \mapsto \mathcal{H}(X)\\
    (f\colon X \to X') & \mapsto (f^{-1}\colon \mathcal{H}(X') \to \mathcal{H}(X))
  \end{align*}
  is a contravariant functor.
\end{prop}
\todo{check that this is actually true. Might work for contravariant but not for covariant.}

\subsection{The construction}
\label{sec:construction}

In this section I want to present the construction of the functor from the category of walled spaces to the category of CAT(0) cube complexes.

\begin{thm}
  \label{thn:construction}
  There exists a covariant functor \(\mathcal{K} \colon \cat{WallS} \to \cat{CCC}\), which is called the \emph{cubulation of \(X\)}, such that any walled space \(X\) equipped with the wall metric is isometric to the zero skeleton \(\mathcal{K}X^{(0)}\) equipped with the metric induced by the metrig graph \(\mathcal{K}X^{(1)}\). Furthermore there is a one to one correspondence between \(\mathcal{\hat H}(X)\) and \(\mathcal{\hat H}(\mathcal{K}X)\).
\end{thm}

\begin{defin}[Ultrafilter]
  Let \((A, \subset, \ ^\ast)\) be a pocset. Let \(\tilde A\) be the set of equivalence classes via \(a \sim b\) if and only if \(a^\ast = b\) or \(a = b\). This is in fact an equivalence relation. Let \(P(A) \coloneqq \prod_{\tilde a \in \tilde A} \tilde a\) and \(\alpha \in P(A)\). I will use the notation \(a \in \alpha\) for some \(a \in A\) to mean that the natural projection \(P(A) \to \tilde a\) maps \(\alpha\) to \(a\) (instead of to \(a^\ast\)). With this notation in mind, an \emph{ultrafilter} \(\alpha \in P(A)\) satisfies the following condition: If \(a\) is in \(\alpha\) and \(a \subset b\) holds for some \(b \in A\), then \(b\) is already in \(\alpha\). I denote by \(\mathcal{U}(A) \subset P(A)\) the subset of all ultrafilters. \(P(A)\) can be topologized using the product topology, if one understands the two element sets \(\tilde a\) to be topologized by the discrete topology. With this (using Tychonoff's theorem\todo{cite something}) \(P(A)\) becomes a compact topological space. A basis of toplogy is given by the sets of the form
\[
  \mathcal{U}(a_1,\dots, a_n) \coloneqq \{\alpha \in P(A) \mid a_1, \dots, a_n \in \alpha\},
\]
where \(a_1,\dots, a_n \in A\) are arbitrary elements.
\end{defin}

\begin{defin}
  Let \(\alpha\) be an ultrafilter and \(\mathfrak{h}_1, \dots, \mathfrak{h}_n \in \alpha\). Then \(\alpha; \mathfrak{h}_1, \dots, \mathfrak{h}_n \in P(A)\) is defined by replacing each \(\mathfrak{h}_i\) in \(\alpha\) by \(\mathfrak{h_i}^\ast\).
\end{defin}

\begin{lemma}
  Let \(\alpha\) be an ultrafilter and \(\mathfrak{h} \in \alpha\). Then \((\alpha;\mathfrak{h})\) is an ultrafilter if and only if \(\mathfrak{h}\) is minimal, i.\,e.\ if \(\mathfrak{h}' \in \alpha\) satisfies \(\mathfrak{h'} \subset \mathfrak{h}\) then \(\mathfrak{h'} = \mathfrak{h}\) holds.
\end{lemma}

\begin{proof}
  First, consider the case that \(\beta \coloneqq (\alpha, \mathfrak{h})\) is an ultrafilter. Let \(\mathfrak{h}' \in \alpha\) such that \(\mathfrak{h}' \subset \mathfrak{h}\). Equivalently this means \(\mathfrak{h}^\ast \subset \mathfrak{h}'^\ast\). Since \(\beta\) is an ultrafilter, it follows that \(\mathfrak{h}'^\ast \in \beta\). However, this is only possible if \(\mathfrak{h} = \mathfrak{h}'\), since otherwise \(\beta\) would have to contain both \(\mathfrak{h}' \) and \(\mathfrak{h}'^\ast\).

  Now, consider that \(\mathfrak{h} \in \alpha\) is minimal. Let \(\mathfrak{h}' \in \beta\) and \(\mathfrak{\tilde h}\) be any halfspace with \(\mathfrak{h}' \subset \mathfrak{\tilde h}\). If \(\mathfrak{h}' \neq \mathfrak{h}\) then \(\mathfrak{h}' \in \alpha \) and hence \(\mathfrak{\tilde h} \in \alpha\). Additionally, \(\mathfrak{\tilde h} \neq \mathfrak{h}\) and it follows that \(\mathfrak{\tilde h} \in \beta\). If \(\mathfrak{h}' = \mathfrak{h}\) then it follows that \(\mathfrak{\tilde h}^\ast \subset \mathfrak{h}\) and thus we have equality. Showing again that \(\mathfrak{\tilde h} = \mathfrak{h}^\ast \in \beta\).
\end{proof}

For now, I denote by \(\mathcal{U}(X)\) the ultrafilters of the pocset of halfspaces of \(X\). Next, consider \(\alpha, \beta \in \mathcal{U}(X)\) and define \(d(\alpha, \beta) \coloneqq \# \{ \mathfrak{h} \in \mathcal{H}(X)\mid \mathfrak{h} \in \alpha \wedge \mathfrak{h}^\ast \in \beta\}\). This is not a metric in the ordinary sense on \(\mathcal{U}(X)\) because it might take \(+\infty\) as a value. However, with its help we can define a graph \(G\) with the ultrafilters as its vertices and edges between \(\alpha\) and \(\beta\), whenever \(d(\alpha, \beta) = 1\).

\begin{defin}
  For any \(x \in X\), I define \(\alpha_x \in \mathcal{U}(X)\) by always choosing the halfspace containing \(x\). It follows readily from the definition that this is an ultrafilter. An ultrafilter that arises in this manner is called a \emph{principal ultrafilter}
\end{defin}

\begin{lemma}
Two ultrafilters \(\alpha\) and \(\beta\) are connected in \(G\) if and only if \(d(\alpha, \beta) < \infty\). In particular, all principla ultrafilters lie in one connected component of \(G\), denoted by \(\mathcal{C}^1X\). 
\end{lemma}

\begin{rem}
  On \(\mathcal{C}^1X\) \(d\) is a metric and we denote all ultrafilter therein as \emph{almost principal ultrafilters}. It can be shown that this metric corresponds to the path metric on this connected component.
\end{rem}

\begin{proof}
  The first assertion corresponds to~\cite[Lemma 4.4]{Nica2004}. For the second assertion remember that any two distinct points \(x,y \in X\) are seperated by a finite, non-zero number of walls. This implies that the ultrafilters \(\alpha_x\) and \(\alpha_y\) only differ in finitely many halfspaces. Hence, \(d(\alpha_x, \alpha_y)\) is finite.
\end{proof}

Naturally, this graph shall be the 1-skeleton of the to be constructed cube complex. Hence, it should be possible to embed \(X\) into it and this should also be in accordance with the path metric, we defined above.

\begin{prop}
  \(\alpha\colon X \to \mathcal{C}^1X,\ x \mapsto \alpha_x\) is an isometric embedding.
\end{prop}

\begin{proof}
  \(\alpha\) is a well-defined map. Next, consider \(x,y \in X\) with \(d_W(x,y) = n\). Then \(x\) and \(y\) are separated by \(n\) walls. Hence, \(\alpha_x\) and \(\alpha_y\) differ in \(n\) places, leading to \(d(\alpha_x, \alpha_y) = n\). All in all \(\alpha\) is an isometric embedding.
\end{proof}

\begin{lemma}
  Let \(\alpha,\beta \in V(C^1X)\) such that \(d(\alpha, \beta) = 1\). Then there exists a unique minimal \(\mathfrak{h} \in \alpha\) such that \(\beta = (\alpha; \mathfrak{h})\). More generally, if \(\alpha_0, \dots, \alpha_n\) is any edge path in \(C^1X\) then there exist unique halfspaces \(\mathfrak{h}_1, \dots \mathfrak{h}_n\), such that \(\alpha_k = (\alpha_0; \mathfrak{h}_1, \dots, \mathfrak{h}_k)\) for all \(k = 1, \dots, n\).
\end{lemma}

\begin{lemma}
  Let \(\alpha \in V(C^1X)\) and \(\mathfrak{h} \in \alpha\) minimal and \(\mathfrak{h'} \in (\alpha; \mathfrak{h})\) minimal. If \(\mathfrak{h}\) and \(\mathfrak{h'}\) are transverse, then \(\mathfrak{h'}\) lies also in \(\alpha\) and is minimal therein. Furthermore, \(\mathfrak{h}\) is minimal in \((\alpha; \mathfrak{h'})\) and we have \((\alpha; \mathfrak{h}, \mathfrak{h'}) = (\alpha; \mathfrak{h'}, \mathfrak{h})\).
\end{lemma}

\begin{proof}
  Since \(\mathfrak{h}\) and \(\mathfrak{h'}\) are transverse, we have \(\mathfrak{h} \neq \mathfrak{h'} \neq \mathfrak{h}^\ast \) leading to \(\mathfrak{h'} \in \alpha\). Let \(\mathfrak{\tilde h} \in \alpha\) such that \(\mathfrak{\tilde h} \subset \mathfrak{h'}\). If \(\mathfrak{\tilde h} \neq \mathfrak{h}\), then equality follows from the fact that \(\mathfrak{h'}\) is minimal \((\alpha; \mathfrak{h})\). In the other case we get a contradiction to the transversality. That \(\mathfrak{h}\) is minimal in \(\alpha; \mathfrak{h'}\) follows from the fact that \((\alpha; \mathfrak{h'}, \mathfrak{h}) = (\alpha; \mathfrak{h}, \mathfrak{h'})\) is an ultrafilter.
\end{proof}

With this graph as a starting point, we can use an inductive process to glue higher dimensional cubes into our complex. Denote by \(\mathcal{C}^nX\) the \(n\)-skeleton of our complex. If \(C^nX\) is already constructed, then a \((n+1)\)-cube is attached whenever its boundary occurs. As an example, whenever there is a 4-cycle in \(\mathcal{C}^1X\) a unit square will be added with the 4-cycle as its boundary. The union (or more precisely the direct limit over the directed system via inclusion) is the desired complex \(\mathcal{C}X\). Before I can prove this I need another Lemma.

\todo{perhaps stuff about fundamental group should be someplace else}
\begin{defin}
  Let \(X\) be a cube complex. Let \(v\) be a vertex of \(X\) and consider two edge-loops \(c_1, c_2\) at \(v\). \(c_1\) and \(c_2\) are said to be \emph{square related}, if there is a square in \(X\) such that \(c_1\) is obtained from \(c_2\) by either replacing two edges successive of the square by the other two, by replacing one edge of the square the other three  (or vice versa) or by adding repectively deleting a doubly and opposedly transversed edge (This is not an equivalence relation). \(c_1\) and \(c_2\) ar said to be \emph{edge equivalent}, if there is a squence of edge-loops connecting the two via square relations (This is an equivalence relation). The set of all edge loops modulo the edge equivalence together with concatenation is called the \emph{edge group of \(X\) at \(v\)} \(E(X,v)\).
\end{defin}

\begin{lemma}
  The map \(f: \E(X,v) \to \pi_1(X,v),\ [c] \mapsto [c]\) is a well-defined, surjective group homomorphism.
\end{lemma}

\begin{proof}
  The map is indepnedent of th representation as the above described switching of sides gives rise to a homotopy between the two edge equivalent loops. Since both groups use the same operation as a group operation this \(f\) is readily seen to be a group homomorphism.

  In order to convice oneself that \(f\) is in fact surjective, one considers any loop \(c\colon [0,1] \to X\). Since every cube complex is a CW complex, the cellular approximation theorem can be applied \todo{cite cellular approximation}. The theorem guarantees the existence of a homotopic loop \(d\), which lies comletely in the 1-skeleton \(X\) and still starts and ends at \(v\). The equivalence class of \(d\) in \(E(X,v)\) is the desired preimage.
\end{proof}

\begin{rem}
  Completely analogously to simplicial complexes this result can even be strengthened to show that the above homomorphism is even an isomorphism. However, since I am content with the surjectivity, I will leave it at that. A proof of the isomorphism in the simplicial case has been given by \textcite[Ch.\ 4.4]{Singer}.
\end{rem}

\begin{thm}
  \(\mathcal{C}X\) is a connected CAT(0) cube complex.
\end{thm}

\begin{proof}
  By construction the 1-skeleton of the complex is connected, hence the same is true for the whol complex as all cubes are connected to the 1-skeleton.
  
  \(\mathcal{C}X\) is indeed a cube complex. Consider all the cubes that are attached during the above process. Each of these cubes is embedded. This can be proven by induction. The claim is clearly true for \(n = 1\), i.\,e.\ the edges of the graph since all of them have distinct end points. Now assume that all \(n\)-cubes are embedded and consider a \((n+1)\)-cube. By construction there can be no identification in the interior of the cube and all the boundary cubes themselves are embedded, so the only possibility left for a collapse would be if some boundary cubes were already identfied before. However, then we would not have added a cube in the first place. Additionally, the gluing is always realized by isometries because the attaching maps respect the metric. This proves the assertion.

  In order to show that \(\mathcal{C}X\) is CAT(0), I apply Gromov's link condition (Theorem~\ref{thm:link}). As a first step one has to establish that \(\mathcal{C}X\) is simply connected. 
\end{proof}

\begin{cor}
  Let \(\Sigma_i\) be two finite-ewidth pocsets and \(X_i\) the associated cube complexes. Furthermore, let \(\Sigma \coloneqq \Sigma_1 \sqcup \Sigma_2\) be the pocset defined by making all elements of \(\Sigma_1\) incomparable to all elements of \(\Sigma_2\) and \(X\) its associated cube complex. Then there is a natural isomorphism between \(X_1 \times X_2\) and \(X\).
\end{cor}

\begin{cor}
  Let \(X\) be a CAT(0) cube complex. 
\end{cor}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Master"
%%% End:
